---
layout: post
title: 盒子的拖拽及拉伸
date: 2019-09-17
tag: 博客
---
**今天主要是写一下盒子的拖拽拉伸(模拟窗口)，总结记录一下思路**
##HTML
>stick-right/left/bottom/top的盒子

```html
 <div class="box">
        <div class="title">一个奇丑无比的盒子</div>
        <div class="stick-right"></div>
        <div class="stick-left"></div>
        <div class="stick-bottom"></div>
        <div class="stick-top"></div>
        <div class="stick-left-top"></div>
        <div class="stick-left-bottom"></div>
        <div class="stick-right-top"></div>
        <div class="stick-right-bottom"></div>
    </div>
```
##CSS
```css
 .box{
            width: 200px;
            height: 200px;
            background: #bfc;
            box-shadow: 5px 5px 5px gray;
            position: absolute;
            user-select: none;
        }
        .box .title{
            height: 50px;
            line-height: 50px;
            border-bottom: 2px solid black;
            cursor: move;
            padding-left: 10px;
        }
        .stick-right,.stick-left{
            width: 3px;
            height: 100%;
            background: deepskyblue;
            position: absolute;
            top: 0;
            right: 0;
            cursor: ew-resize
        }
        .stick-left{
            left: 0;
        }
        .stick-bottom,.stick-top{
            position: absolute;
            width: 100%;
            height: 5px;
            background: greenyellow;
            bottom: 0;
            left: 0;
            cursor: ns-resize;
        }
        .stick-top{
            top:0
        }
        .stick-left-bottom,.stick-right-top,.stick-right-bottom,.stick-left-top{
            width: 5px;
            height: 5px;
            background: deeppink;
            position: absolute;
        }
        .stick-left-top{
            top: 0;
            left: 0;
            cursor: nwse-resize
        }
        .stick-left-bottom{
            left: 0;
            bottom: 0;
            cursor:sw-resize
        }
        .stick-right-top{
            top: 0;
            right: 0;
            cursor: ne-resize;
        }
        .stick-right-bottom{
            bottom: 0;
            right: 0;
            cursor: se-resize;
        }
```
##JS
```js
 function drag(){
            var title = document.querySelector('.title');
        var box = document.querySelector('.box')

        title.onmousedown = function (evt){
                
                evt.preventDefault()
                console.log(evt.type)
                //记录下鼠标按下时，光标的位置
                var downX= evt.clientX;
                var downY = evt.clientY
                var downLeft = box.offsetLeft;
                var downTop = box.offsetTop;

            window.onmousemove = function (evt){
                evt.preventDefault()
                console.log(evt.type)

                //计算光标移动的距离
                var distX = evt.clientX - downX;
                var distY = evt.clientY - downY;

                box.style.left = downLeft + distX + 'px'
                box.style.top = downTop + distY + 'px'
            }
                
           window.onmouseup = function (evt){
               
                window.onmousemove = null;
                evt.preventDefault()
                console.log(evt.type)
                window.onmouseup = null;
            }
        }
    
        }
        drag()

        function resize(dir){

            var stick = document.querySelector('.stick-' + dir)
            //dir传的是left，right，top，bottom，是字符串
            var box = document.querySelector('.box')
            var isLeft,isRight,isBottom,isTop;//onmousemove用
             isLeft = dir.indexOf('left') !== -1 ? true:false;
             isRight = dir.indexOf('right') !== -1 ? true:false;
             isBottom = dir.indexOf('bottom') !== -1 ? true:false;
             isTop = dir.indexOf('top') !== -1 ? true:false;
            //通过索引找到，
            stick.onmousedown = function (evt){
                evt.preventDefault();
                //TODO:将四个方向要用到的所有值全部取出备用

                var downX = evt.clientX;
                var downY = evt.clientY;

                var downWidth = box.offsetWidth;
                var downHeight = box.offsetHeight;

                var downLeft = box.offsetLeft;
                var downTop = box.offsetTop;

                window.onmousemove = function (evt){
                    evt.preventDefault();
                   
                    //TODO:
                    var distX = evt.clientX - downX;
                    var distY = evt.clientY - downY;
                    
                    if(isRight){
                        box.style.width = downWidth + distX + 'px'
                    }
                    if(isLeft){
                        box.style.left = downLeft + distX + 'px'
                        box.style.width = downWidth - distX + 'px'
                    }
                    if(isBottom){
                        box.style.height = downHeight + distY + 'px'
                    }
                    if(isTop){
                        box.style.top = downTop + distY + 'px'
                        box.style.height = downHeight - distY + 'px'
                    }
                    
                }
            window.onmouseup = function (evt){
                evt.preventDefault();
                window.onmousemove = null;//鼠标抬起move就不监听了
                window.onmouseup = null;
            }
            }
        }
        resize('right')
        resize('left')
        resize('top')
        resize('bottom')
        resize('left-top')
        resize('left-bottom')
        resize('right-top')
        resize('right-bottom')
```